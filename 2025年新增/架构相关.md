# MVC

https://yuanbao.tencent.com/chat/naQivTmsDa/0f454cd0-a2df-4def-babd-1a0e3e5f4cdd?projectId=2f13020843e3426ab5f1fc84dfe2aa87

# Module Federationå’Œå¾®å‰ç«¯ä»€ä¹ˆåŒºåˆ«

`Module Federation` å’Œ `å¾®å‰ç«¯ï¼ˆMicro-Frontendï¼‰` æ˜¯å‰ç«¯æ¶æ„ä¸­çš„ä¸¤ä¸ªç›¸å…³æ¦‚å¿µï¼Œä½†å®ƒä»¬çš„**å±‚çº§ä¸åŒ**ã€**ç›®æ ‡ä¸åŒ**ï¼Œç†è§£å®ƒä»¬çš„å…³ç³»å¯ä»¥ç±»æ¯”ä¸ºâ€œ**æŠ€æœ¯å®ç°æ‰‹æ®µ**â€å’Œâ€œ**æ¶æ„è®¾è®¡ç†å¿µ**â€ã€‚

------

## âœ… ä¸€å¥è¯åŒºåˆ«

- **å¾®å‰ç«¯** æ˜¯ä¸€ç§**æ¶æ„è®¾è®¡ç†å¿µ**ï¼Œä¸»å¼ æŠŠå‰ç«¯åº”ç”¨åƒåç«¯ä¸€æ ·æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹å¯éƒ¨ç½²çš„æ¨¡å—ã€‚
- **Module Federation** æ˜¯ä¸€ç§**æŠ€æœ¯å®ç°æ‰‹æ®µ**ï¼Œæ˜¯ Webpack 5 æä¾›çš„åŠŸèƒ½ï¼Œç”¨æ¥å®ç°å¤šä¸ªåº”ç”¨ä¹‹é—´æ¨¡å—å…±äº«/æ‡’åŠ è½½ç­‰å¾®å‰ç«¯çš„éœ€æ±‚ã€‚

------

## ğŸ§  å¾®å‰ç«¯æ˜¯ä»€ä¹ˆï¼Ÿ

å¾®å‰ç«¯ï¼ˆMicro-Frontendï¼‰æ˜¯ä¸€ç§å‰ç«¯æ¶æ„æ€æƒ³ï¼Œç›®æ ‡æ˜¯ï¼š

- å°†å¤§å‹å‰ç«¯åº”ç”¨**æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†æˆå¤šä¸ªå­åº”ç”¨**
- æ¯ä¸ªå­åº”ç”¨å¯ä»¥**ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€æŠ€æœ¯æ ˆå¯ä¸åŒ**
- æœ€ç»ˆé€šè¿‡ä¸€ä¸ªä¸»åº”ç”¨ï¼ˆå®¹å™¨ï¼‰è¿›è¡Œ**æ•´åˆ**

**ğŸ“¦ ç‰¹ç‚¹**

- ç±»ä¼¼äºå¾®æœåŠ¡çš„å‰ç«¯ç‰ˆæœ¬
- å¸¸è§æ•´åˆæ–¹å¼æœ‰ iframeã€JavaScript è„šæœ¬æ³¨å…¥ã€è·¯ç”±åŠ«æŒç­‰
- å®ç°æŠ€æœ¯æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š
  - Webpack Module Federation
  - Qiankun
  - single-spa
  - SystemJS
  - è‡ªå®šä¹‰åŠ è½½æœºåˆ¶

------

## ğŸ§© Module Federation æ˜¯ä»€ä¹ˆï¼Ÿ

**Module Federation** æ˜¯ **Webpack 5** å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸å¤šä¸ªç‹¬ç«‹æ„å»ºçš„åº”ç”¨**åœ¨ç¼–è¯‘æ„å»ºæ—¶ç¡®å®šæ¨¡å—å…³ç³»**ï¼Œ**åœ¨è¿è¡Œæ—¶åŠ¨æ€å…±äº«æ¨¡å—**ï¼ˆåŒ…æ‹¬ React/Vue ç»„ä»¶ã€å·¥å…·å‡½æ•°ã€ç”šè‡³æ•´ä¸ªé¡µé¢ï¼‰ï¼Œè€Œä¸éœ€è¦æå‰æ‰“åŒ…åˆ°ä¸€èµ·ã€‚

å®ƒåœ¨**å¾®å‰ç«¯**é‡Œç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥è®©ä¸åŒå­åº”ç”¨ä¹‹é—´**å…±äº«ä¾èµ–ã€åŠ¨æ€åŠ è½½å½¼æ­¤çš„æ¨¡å—**ï¼Œä»è€Œé¿å…é‡å¤ä¸‹è½½å’Œæ„å»ºã€‚

------

**åŸºæœ¬ä½¿ç”¨æµç¨‹**

å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªåº”ç”¨ï¼š

- **app1ï¼ˆä¸»åº”ç”¨ / Hostï¼‰**
- **app2ï¼ˆè¿œç¨‹åº”ç”¨ / Remoteï¼‰**

**1 é…ç½®è¿œç¨‹åº”ç”¨ï¼ˆ`app2`ï¼‰**

```js
// webpack.config.js
const { ModuleFederationPlugin } = require("webpack").container;

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: "app2", // è¿œç¨‹åº”ç”¨åç§°
      filename: "remoteEntry.js", // æš´éœ²çš„å…¥å£æ–‡ä»¶
      exposes: {
        "./Button": "./src/components/Button", // æš´éœ²æ¨¡å—
      },
      shared: { react: { singleton: true }, "react-dom": { singleton: true } }, // å…±äº«ä¾èµ–
    })
  ]
};
```

------

**2.é…ç½®ä¸»åº”ç”¨ï¼ˆ`app1`ï¼‰**

```js
// webpack.config.js
const { ModuleFederationPlugin } = require("webpack").container;

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: "app1",
      remotes: {
        app2: "app2@http://localhost:3002/remoteEntry.js", // è¿œç¨‹å…¥å£
      },
      shared: { react: { singleton: true }, "react-dom": { singleton: true } },
    })
  ]
};
```

------

**3. ä¸»åº”ç”¨ä¸­ä½¿ç”¨è¿œç¨‹æ¨¡å—**

```js
// src/App.js
import React from "react";
const RemoteButton = React.lazy(() => import("app2/Button"));

export default function App() {
  return (
    <React.Suspense fallback="Loading...">
      <RemoteButton />
    </React.Suspense>
  );
}
```

è¿™æ ·è¿è¡Œæ—¶ï¼Œ`app1` ä¼šåŠ¨æ€ä» `app2` æ‹‰å– `Button` ç»„ä»¶ï¼Œå¹¶ä¸”è‡ªåŠ¨å¤„ç†å…±äº«ä¾èµ–ï¼ˆæ¯”å¦‚ React åªåŠ è½½ä¸€æ¬¡ï¼‰ã€‚

**ğŸ“¦ ç‰¹ç‚¹**

- å¯ä»¥è·¨é¡¹ç›®å…±äº«ç»„ä»¶ã€åº“ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆ
- æ”¯æŒè¿è¡Œæ—¶æ‡’åŠ è½½
- å„é¡¹ç›®ä¹‹é—´å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€æ›´æ–°
- ä¸éœ€è¦å†æ‰‹åŠ¨ä¸Šä¼ æ‰“åŒ…äº§ç‰©æˆ–ç”¨ iframe å¼•ç”¨

------

## âœ… æ€»ç»“å¯¹æ¯”

| ç‰¹æ€§ç»´åº¦       | qiankun (è¿è¡Œæ—¶æ¡†æ¶)                                         | Module Federation (ç¼–è¯‘æ—¶æ–¹æ¡ˆ)                               |
| :------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **å®ç°æ–¹å¼**   | **è¿è¡Œæ—¶åŠ è½½**ï¼ŒåŸºäº `import-html-entry` è§£æå…¥å£ï¼ŒåŠ¨æ€æ‰§è¡Œ JS/CSSã€‚ | **ç¼–è¯‘æ—¶ä¾èµ–**ï¼Œé€šè¿‡ Webpack æ’ä»¶åœ¨æ„å»ºæ—¶ç¡®å®šæ¨¡å—å…³ç³»ï¼Œ**è¿è¡Œæ—¶åŠ¨æ€æ‹‰å–**ã€‚ |
| **æ ¸å¿ƒä¼˜åŠ¿**   | **ç¯å¢ƒéš”ç¦»**ã€‚æä¾›æˆç†Ÿçš„ JS æ²™ç®±å’Œ CSS éš”ç¦»ï¼Œé˜²æ­¢åº”ç”¨é—´å†²çªã€‚ | **ä¾èµ–å…±äº«**ã€‚å¯ä»¥åšåˆ°æè‡´çš„ä¾èµ–å¤ç”¨ï¼Œå¦‚å¤šä¸ªå¾®åº”ç”¨å…±äº«åŒä¸€ä¸ª React å®ä¾‹ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚ |
| **éš”ç¦»æœºåˆ¶**   | **å¼ºéš”ç¦»**ã€‚å†…ç½® JS æ²™ç®±å’Œ Shadow DOM/scoped CSS ç­‰æ ·å¼éš”ç¦»æ–¹æ¡ˆï¼Œéå¸¸å¯é ã€‚ | **å¼±éš”ç¦»**ã€‚è‡ªèº«ä¸æä¾›æ²™ç®±ï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œå¤„ç†å…¨å±€æ±¡æŸ“é—®é¢˜ï¼Œæˆ–è€…ä¸å…¶ä»–æ–¹æ¡ˆç»“åˆã€‚ |
| **ä¾èµ–å…±äº«**   | è¾ƒå¼±ã€‚é€šå¸¸é€šè¿‡ Webpack `externals` é…ç½®æ¥å®ç°ï¼Œé…ç½®ç›¸å¯¹ç¹çä¸”ä¸å¤Ÿçµæ´»ã€‚ | **åŸç”Ÿæ”¯æŒ**ã€‚é€šè¿‡ `shared` é…ç½®å¯ä»¥éå¸¸ç®€å•ã€é«˜æ•ˆåœ°å…±äº«ä¾èµ–ï¼Œå¹¶èƒ½å¤„ç†ç‰ˆæœ¬å†²çªã€‚ |
| **æ€§èƒ½**       | æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ï¼ˆæ²™ç®±çš„åˆ›å»ºä¸ä»£ç†ã€å…¨é‡åº”ç”¨èµ„æºçš„åŠ è½½ï¼‰ã€‚ä½†æä¾›é¢„åŠ è½½èƒ½åŠ›æ¥ä¼˜åŒ–ã€‚ | æ€§èƒ½æé«˜ã€‚å› ä¸ºæ˜¯æŒ‰éœ€å¼•ç”¨æ¨¡å—ï¼Œä¸”ä¾èµ–å…±äº«åšå¾—å¥½ï¼Œå¯ä»¥é¿å…é‡å¤åŠ è½½åº“ï¼Œæ¥è¿‘åŸç”Ÿå•ä½“åº”ç”¨æ€§èƒ½ã€‚ |
| **æ¥å…¥æˆæœ¬**   | **å¯¹è€æ—§é¡¹ç›®å‹å¥½**ã€‚åªéœ€ä¿®æ”¹æ‰“åŒ…é…ç½®ï¼Œæš´éœ²ç”Ÿå‘½å‘¨æœŸå‡½æ•°å³å¯ï¼Œä¾µå…¥æ€§è¾ƒä½ã€‚ | **å¯¹æ–°é¡¹ç›®æ›´ä¼˜**ã€‚éœ€è¦é¡¹ç›®ä½¿ç”¨ Webpack 5+ æˆ–å…¼å®¹çš„æ„å»ºå·¥å…·ï¼Œå¯¹æ„å»ºé…ç½®çš„ç†è§£è¦æ±‚æ›´é«˜ã€‚ |
| **ä½¿ç”¨ä½“éªŒ**   | **å¼€ç®±å³ç”¨**ã€‚æä¾›å®Œæ•´çš„ API å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œåƒä¸€ä¸ªâ€œå¤§ç®¡å®¶â€ï¼Œä¸Šæ‰‹ç®€å•ã€‚ | **æ›´åº•å±‚ã€æ›´çµæ´»**ã€‚å®ƒåªæ˜¯ä¸€ä¸ªæ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±è®¾è®¡ä¸Šå±‚æ¶æ„ï¼ˆå¦‚è·¯ç”±ã€é€šä¿¡ï¼‰ã€‚ |
| **æŠ€æœ¯æ ˆæ— å…³** | **éå¸¸æ“…é•¿**ã€‚é€šè¿‡éš”ç¦»æœºåˆ¶ï¼Œå®Œç¾æ”¯æŒ React, Vue, Angular ç­‰ä»»æ„æŠ€æœ¯æ ˆæ··åˆã€‚ | **åŒæ ·æ“…é•¿**ã€‚åªè¦æ˜¯ JS æ¨¡å—ï¼Œéƒ½å¯ä»¥å…±äº«å’Œå¼•ç”¨ã€‚             |

------

## ğŸ’¡ ä¸¤è€…å…³ç³»ï¼šå®ç° vs æ¶æ„

> ä½ å¯ä»¥ä½¿ç”¨ Module Federation æ¥å®ç°å¾®å‰ç«¯æ¶æ„ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹å¼ï¼ˆiframeã€single-spa ç­‰ï¼‰æ¥å®ç°å¾®å‰ç«¯ã€‚Module Federation æ›´åƒæ˜¯â€œå®ç°å¾®å‰ç«¯çš„ç°ä»£åŒ–åˆ©å™¨â€ã€‚

# Web Componentsæ˜¯ä»€ä¹ˆ

**Web Components** æ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ä¸€å¥—æŠ€æœ¯è§„èŒƒï¼Œè®©ä½ å¯ä»¥åˆ›å»º**å¯å¤ç”¨ã€å°è£…è‰¯å¥½**çš„è‡ªå®šä¹‰ HTML å…ƒç´ ï¼Œå¹¶ä¸”ä¸ä¾èµ– Reactã€Vue ç­‰æ¡†æ¶ã€‚

å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š

> è®©å‰ç«¯ç»„ä»¶åŒ–å˜æˆæµè§ˆå™¨çš„åŸç”Ÿèƒ½åŠ›ï¼Œè€Œä¸æ˜¯ä¾èµ–ç¬¬ä¸‰æ–¹æ¡†æ¶ã€‚

------

**1. Web Components ä¸‰å¤§æ ¸å¿ƒæŠ€æœ¯**

| æŠ€æœ¯                | ä½œç”¨                 | å…³é”®ç‚¹                                           |
| ------------------- | -------------------- | ------------------------------------------------ |
| **Custom Elements** | å®šä¹‰è‡ªå®šä¹‰ HTML æ ‡ç­¾ | é€šè¿‡ `customElements.define()` æ³¨å†Œç»„ä»¶ç±»        |
| **Shadow DOM**      | æ ·å¼å’Œ DOM éš”ç¦»      | `attachShadow({ mode: 'open' })` åˆ›å»ºç§æœ‰ DOM æ ‘ |
| **HTML Templates**  | å®šä¹‰å¯å¤ç”¨æ¨¡æ¿       | `<template>` æ ‡ç­¾å­˜æ”¾ç»“æ„ï¼Œè¿è¡Œæ—¶å…‹éš†æ’å…¥        |

------

**2. åŸºæœ¬ç¤ºä¾‹**

åˆ›å»ºä¸€ä¸ªå¸¦æ ·å¼éš”ç¦»çš„æŒ‰é’®ç»„ä»¶ï¼š

```js
class MyButton extends HTMLElement {
  constructor() {
    super();
    const shadow = this.attachShadow({ mode: 'open' });

    // æ ·å¼ + HTML
    shadow.innerHTML = `
      <style>
        button {
          background: tomato;
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 4px;
          cursor: pointer;
        }
      </style>
      <button>Click me</button>
    `;
  }
}

// æ³¨å†Œè‡ªå®šä¹‰æ ‡ç­¾
customElements.define('my-button', MyButton);
```

HTML ä½¿ç”¨ï¼š

```html
<my-button></my-button>
```

ç‰¹ç‚¹ï¼š

- `<my-button>` æ˜¯ä¸€ä¸ªåŸç”Ÿ DOM å…ƒç´ ã€‚
- æ ·å¼åªä½œç”¨äºå®ƒçš„ Shadow DOM å†…éƒ¨ï¼Œä¸ä¼šæ±¡æŸ“å¤–éƒ¨é¡µé¢ã€‚

------

**3. ä¼˜ç‚¹**

- **åŸç”Ÿæ”¯æŒ**ï¼šæ— éœ€å¼•å…¥æ¡†æ¶ï¼Œç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Edgeã€Firefoxã€Safariï¼‰åŸºæœ¬éƒ½æ”¯æŒã€‚
- **æ ·å¼éš”ç¦»**ï¼šShadow DOM å¤©ç„¶æä¾›æ ·å¼ä½œç”¨åŸŸã€‚
- **å¯å¤ç”¨æ€§**ï¼šå¯åœ¨ä»»ä½•æ¡†æ¶ä¸­ä½¿ç”¨ï¼ˆReactã€Vueã€Angular éƒ½èƒ½ç›´æ¥ç”¨ï¼‰ã€‚

------

**4. ç¼ºç‚¹**

- **å¼€å‘ä½“éªŒä¸€èˆ¬**ï¼šä¸åƒ React/Vue é‚£æ ·æœ‰å“åº”å¼ã€æ•°æ®ç»‘å®šã€çŠ¶æ€ç®¡ç†ç­‰é«˜çº§ç‰¹æ€§ã€‚
- **å…¼å®¹æ€§**ï¼šè€æ—§æµè§ˆå™¨ï¼ˆIEï¼‰ä¸æ”¯æŒï¼Œéœ€è¦ polyfillã€‚
- **ç”Ÿæ€å°**ï¼šç›¸æ¯”æ¡†æ¶ç»„ä»¶åº“ï¼ŒWeb Components çš„æˆç†Ÿåº¦å’Œç¤¾åŒºèµ„æºå°‘ã€‚

------

**5. å¸¸è§åº”ç”¨åœºæ™¯**

- è®¾è®¡ç³»ç»Ÿï¼ˆDesign Systemï¼‰å’Œè·¨æ¡†æ¶ç»„ä»¶åº“ï¼ˆæ¯”å¦‚ Ionicã€Vaadinï¼‰ã€‚
- å¾®å‰ç«¯çš„å­åº”ç”¨å°è£…ã€‚
- åœ¨å¤šæŠ€æœ¯æ ˆæ··åˆé¡¹ç›®ä¸­åš UI ç»Ÿä¸€ã€‚

# å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«

å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆPub-Subï¼‰å’Œè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ç»å¸¸è¢«æ··ç”¨ï¼Œä½†å®ƒä»¬**æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„è®¾è®¡æ¨¡å¼**ï¼Œæœ‰å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š

------

ğŸ§  ä¸€å¥è¯ç†è§£

| æ¨¡å¼              | ç®€è¦è¯´æ˜                                                     |
| ----------------- | ------------------------------------------------------------ |
| **è§‚å¯Ÿè€…æ¨¡å¼**    | ç›®æ ‡å¯¹è±¡ç»´æŠ¤ä¸€ç»„è§‚å¯Ÿè€…ï¼ŒçŠ¶æ€å˜åŒ–æ—¶ä¸»åŠ¨é€šçŸ¥å®ƒä»¬ï¼ˆ**ä¸€å¯¹å¤šï¼Œç›´æ¥é€šçŸ¥**ï¼‰ã€‚ |
| **å‘å¸ƒ-è®¢é˜…æ¨¡å¼** | å‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½é€šè¿‡ä¸­é—´çš„â€œäº‹ä»¶ä¸­å¿ƒâ€è§£è€¦ï¼ˆ**ä¸‰æ–¹ç»“æ„ï¼Œé—´æ¥é€šçŸ¥**ï¼‰ã€‚ |

------

ğŸ“Œ æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

| ç»´åº¦         | è§‚å¯Ÿè€…æ¨¡å¼                                       | å‘å¸ƒ-è®¢é˜…æ¨¡å¼                                                |
| ------------ | ------------------------------------------------ | ------------------------------------------------------------ |
| **ç»“æ„ç»„æˆ** | ç›®æ ‡ï¼ˆSubjectï¼‰+ å¤šä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰          | å‘å¸ƒè€…ï¼ˆPublisherï¼‰ã€è®¢é˜…è€…ï¼ˆSubscriberï¼‰ã€è°ƒåº¦ä¸­å¿ƒï¼ˆEvent Busï¼‰ |
| **æ˜¯å¦è§£è€¦** | âŒ å‘å¸ƒè€…ä¸è®¢é˜…è€…**è€¦åˆç´§å¯†**ï¼Œç›®æ ‡çŸ¥é“è§‚å¯Ÿè€…æ˜¯è° | âœ… å‘å¸ƒè€…å’Œè®¢é˜…è€…**å®Œå…¨è§£è€¦**ï¼Œéƒ½ä¸çŸ¥é“å¯¹æ–¹æ˜¯è°               |
| **é€šçŸ¥æ–¹å¼** | ç›®æ ‡å¯¹è±¡**ä¸»åŠ¨**é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…                   | å‘å¸ƒè€…å°†äº‹ä»¶å‘é€ç»™**äº‹ä»¶ä¸­å¿ƒ**ï¼Œå†ç”±å®ƒé€šçŸ¥è®¢é˜…è€…             |
| **è®¢é˜…è¿‡ç¨‹** | è§‚å¯Ÿè€…**ç›´æ¥æ³¨å†Œåˆ°ç›®æ ‡å¯¹è±¡ä¸Š**                   | è®¢é˜…è€…**æ³¨å†Œåˆ°äº‹ä»¶ä¸­å¿ƒçš„æŸä¸ªäº‹ä»¶ä¸Š**                         |
| **ä½¿ç”¨åœºæ™¯** | æ•°æ®é©±åŠ¨è§†å›¾æ›´æ–°ï¼ˆå¦‚ React çš„ä¾èµ–å“åº”ï¼‰          | å¤šæ¨¡å—é€šä¿¡ï¼ˆå¦‚äº‹ä»¶æ€»çº¿ã€æ¶ˆæ¯ä¸­å¿ƒï¼‰                           |
| **ä¾‹å­**     | Vue çš„å“åº”å¼ç³»ç»Ÿã€ä¾èµ–æ”¶é›†                       | Redux ä¸­çš„ middlewareã€Node.js EventEmitter                  |

------

ğŸ§© ç¤ºä¾‹ä»£ç å¯¹æ¯”ï¼ˆç®€åŒ–ç‰ˆï¼‰

ğŸ” è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆç›®æ ‡çŸ¥é“è§‚å¯Ÿè€…ï¼‰

```js
class Subject {
  constructor() {
    this.observers = []
  }

  addObserver(observer) {
    this.observers.push(observer)
  }

  notify(data) {
    this.observers.forEach(fn => fn(data))
  }
}

const subject = new Subject()
subject.addObserver((val) => console.log('observer1', val))
subject.notify('update')
```

> âœ… è§‚å¯Ÿè€…æ˜¯ç›´æ¥æŒ‚åœ¨ `subject` ä¸Šçš„ã€‚

------

ğŸ“£ å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆé€šè¿‡äº‹ä»¶ä¸­å¿ƒï¼‰

```js
class EventBus {
  constructor() {
    this.events = {}
  }

  subscribe(event, callback) {
    (this.events[event] ||= []).push(callback)
  }

  publish(event, data) {
    (this.events[event] || []).forEach(fn => fn(data))
  }
}

const bus = new EventBus()

bus.subscribe('news', (data) => console.log('Subscriber got:', data))

bus.publish('news', 'New article published!')
```

> âœ… å‘å¸ƒè€…å’Œè®¢é˜…è€…é€šè¿‡ `bus` é—´æ¥é€šä¿¡ï¼Œä¸ç›¸äº’çŸ¥é“ã€‚

------

âœ… æ€»ç»“ä¸€å¥è¯

- **è§‚å¯Ÿè€…æ¨¡å¼**æ˜¯**å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–**ï¼Œç”±è¢«è§‚å¯Ÿè€…ä¸»åŠ¨è§¦å‘é€šçŸ¥ï¼›
- **å‘å¸ƒ-è®¢é˜…æ¨¡å¼**æ˜¯é€šè¿‡ä¸€ä¸ª**å…¨å±€è°ƒåº¦ä¸­å¿ƒ**è¿›è¡Œäº‹ä»¶åˆ†å‘å’Œæ¥æ”¶ï¼Œå½»åº•è§£è€¦ã€‚

# å‰ç«¯å“ªäº›æŠ€æœ¯å·¥å…·ä¸­è¿ç”¨äº†å·¥å‚è®¾è®¡æ¨¡å¼

åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ**å·¥å‚è®¾è®¡æ¨¡å¼ï¼ˆFactory Patternï¼‰\**éå¸¸å¸¸è§ï¼Œå°¤å…¶é€‚ç”¨äº\**å¯¹è±¡åˆ›å»ºé€»è¾‘å¤æ‚ã€éœ€è¦å°è£…ç»†èŠ‚æˆ–æ„å»ºæŠ½è±¡æ¥å£**çš„åœºæ™¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æˆ–ä½“ç°å·¥å‚æ¨¡å¼æ€æƒ³çš„å…¸å‹å‰ç«¯æŠ€æœ¯å·¥å…·æˆ–åœºæ™¯ï¼š

------

âœ… å·¥å‚æ¨¡å¼æ ¸å¿ƒå®šä¹‰

> å·¥å‚æ¨¡å¼æ˜¯ä¸€ä¸ªåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒ**å°†å¯¹è±¡åˆ›å»ºå°è£…åœ¨ä¸€ä¸ªå‡½æ•°/ç±»/æ–¹æ³•ä¸­**ï¼Œé¿å…ä½¿ç”¨è€…ç›´æ¥ç”¨ `new`ï¼Œæé«˜åˆ›å»ºè¿‡ç¨‹çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ã€‚

------

ğŸ”§ å‰ç«¯æŠ€æœ¯ä¸­å¸¸è§çš„å·¥å‚æ¨¡å¼åº”ç”¨åœºæ™¯ï¼š

------

1. **`document.createElement()`**

- **ä½œç”¨**ï¼šåŠ¨æ€åˆ›å»º DOM å…ƒç´ ã€‚
- æ ¹æ®æ ‡ç­¾åç”Ÿæˆå¯¹åº”çš„ DOM èŠ‚ç‚¹ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ `new HTMLDivElement()`ã€‚

```
const div = document.createElement('div'); // å·¥å‚æ–¹æ³•ç”Ÿæˆ div
```

2. **Axios å®ä¾‹åˆ›å»º**

```js
const instance = axios.create({
  baseURL: '/api',
  timeout: 1000,
});
```

- `axios.create()` å°±æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼š**æ ¹æ®é…ç½®è¿”å›ä¸€ä¸ªæ–°çš„ axios å®ä¾‹**
- æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„æ‹¦æˆªå™¨ã€é…ç½®ç­‰

------

3. **Redux ä¸­ createStoreã€configureStore**

```js
const store = createStore(reducer);
```

- `createStore` å’Œ `configureStore` éƒ½æ˜¯**å·¥å‚å‡½æ•°**ï¼Œå°è£…äº† store çš„åˆå§‹åŒ–è¿‡ç¨‹

------

4. **å‰ç«¯å›¾è¡¨åº“å¦‚ ECharts**

```js
const chart = echarts.init(dom); // å·¥å‚å‡½æ•°
```

- `echarts.init()` æ˜¯å·¥å‚æ–¹æ³•ï¼šæ ¹æ®å®¹å™¨å’Œé…ç½®è¿”å›ä¸€ä¸ªå›¾è¡¨å®ä¾‹å¯¹è±¡

------

5. **HTML5 Canvas / WebGL**

```js
const ctx = canvas.getContext('2d'); // å·¥å‚ï¼šè¿”å›ç»˜å›¾ä¸Šä¸‹æ–‡å¯¹è±¡
```

- `getContext()` æ ¹æ®ä¼ å…¥çš„ç±»å‹è¿”å›ä¸åŒçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆ2dã€webglï¼‰
