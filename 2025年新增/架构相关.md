# MVC

https://yuanbao.tencent.com/chat/naQivTmsDa/0f454cd0-a2df-4def-babd-1a0e3e5f4cdd?projectId=2f13020843e3426ab5f1fc84dfe2aa87

# Restful API

https://yuanbao.tencent.com/chat/naQivTmsDa/4bf60257-7db5-4ec4-a489-23bcae3e3391?projectId=2f13020843e3426ab5f1fc84dfe2aa87

| å¯¹æ¯”ç»´åº¦         | RESTful API                                  | GraphQL                               |
| ---------------- | -------------------------------------------- | ------------------------------------- |
| **æ¥å£ç»“æ„**     | å¤šä¸ª URLï¼Œæ¯ä¸ªä»£è¡¨ä¸€ä¸ªèµ„æº                   | å•ä¸€ URLï¼ŒåŸºäº schema æä¾›å­—æ®µæŸ¥è¯¢    |
| **æ•°æ®è·å–**     | å›ºå®šå­—æ®µå“åº”ï¼Œå¯èƒ½ over-fetch æˆ– under-fetch | ç²¾ç¡®æŒ‰éœ€è¯·æ±‚å­—æ®µ                      |
| **å‰ç«¯çµæ´»æ€§**   | ä½ï¼Œå­—æ®µç”±åç«¯å†³å®š                           | é«˜ï¼Œå­—æ®µç”±å‰ç«¯æŸ¥è¯¢å®šä¹‰                |
| **æ¥å£ç‰ˆæœ¬ç®¡ç†** | éœ€è¦ç»´æŠ¤ `/v1/user` ç­‰ç‰ˆæœ¬è·¯å¾„               | schema æ¼”åŒ–æ— éœ€ç‰ˆæœ¬è·¯å¾„               |
| **è¯·æ±‚æ¬¡æ•°**     | å¤šèµ„æºéœ€è¦å¤šæ¬¡è¯·æ±‚                           | å¤šèµ„æºå¯åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­èšåˆ              |
| **å­¦ä¹ æ›²çº¿**     | ä½ï¼ŒHTTP åè®®å¤©ç„¶æ”¯æŒ                        | é«˜ï¼Œéœ€è¦ç†è§£ queryã€mutationã€schema  |
| **ç¼“å­˜æœºåˆ¶**     | åŸºäº URL ç¼“å­˜ç®€å•æ˜äº†                        | åŸºäº query ç¼“å­˜å¤æ‚ï¼Œéœ€è¦ client é…åˆ |
| **è°ƒè¯•å·¥å…·**     | Postman ç­‰é€šç”¨å·¥å…·                           | GraphiQL/Playground æ›´æ™ºèƒ½            |
| **åç«¯è´Ÿæ‹…**     | æ˜ç¡®ï¼Œåç«¯æ§åˆ¶å“åº”æ ¼å¼                       | é«˜ï¼Œéœ€æ”¯æŒå­—æ®µçº§åˆ«è§£æä¸æƒé™æ§åˆ¶      |

**REST ç®€å•ç¨³å®šï¼ŒGraphQL çµæ´»é«˜æ•ˆ**ã€‚å®é™…é€‰æ‹©ä¸Šä¼šæ ¹æ®**å›¢é˜Ÿèƒ½åŠ›ã€ç³»ç»Ÿå¤æ‚åº¦å’Œå‰åç«¯åä½œæ–¹å¼**æƒè¡¡ä½¿ç”¨ã€‚

**GraphQL æ˜¯ä¸€ä¸ªæœ‰è§„èŒƒã€æœ‰è¯­æ³•ã€æœ‰æ‰§è¡Œå¼•æ“çš„æ­£å¼APIåè®®**ï¼Œå®ƒä¸åƒâ€œRESTfulâ€é‚£æ ·åªæ˜¯é£æ ¼è§„èŒƒï¼Œè€Œæ˜¯å¯ä»¥è¢«æ ‡å‡†åŒ–è§£æã€æ ¡éªŒå’Œæ‰§è¡Œçš„å®Œæ•´æŸ¥è¯¢è¯­è¨€ã€‚

# Module Federationå’Œå¾®å‰ç«¯ä»€ä¹ˆåŒºåˆ«

`Module Federation` å’Œ `å¾®å‰ç«¯ï¼ˆMicro-Frontendï¼‰` æ˜¯å‰ç«¯æ¶æ„ä¸­çš„ä¸¤ä¸ªç›¸å…³æ¦‚å¿µï¼Œä½†å®ƒä»¬çš„**å±‚çº§ä¸åŒ**ã€**ç›®æ ‡ä¸åŒ**ï¼Œç†è§£å®ƒä»¬çš„å…³ç³»å¯ä»¥ç±»æ¯”ä¸ºâ€œ**æŠ€æœ¯å®ç°æ‰‹æ®µ**â€å’Œâ€œ**æ¶æ„è®¾è®¡ç†å¿µ**â€ã€‚

------

## âœ… ä¸€å¥è¯åŒºåˆ«

- **å¾®å‰ç«¯** æ˜¯ä¸€ç§**æ¶æ„è®¾è®¡ç†å¿µ**ï¼Œä¸»å¼ æŠŠå‰ç«¯åº”ç”¨åƒåç«¯ä¸€æ ·æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹å¯éƒ¨ç½²çš„æ¨¡å—ã€‚
- **Module Federation** æ˜¯ä¸€ç§**æŠ€æœ¯å®ç°æ‰‹æ®µ**ï¼Œæ˜¯ Webpack 5 æä¾›çš„åŠŸèƒ½ï¼Œç”¨æ¥å®ç°å¤šä¸ªåº”ç”¨ä¹‹é—´æ¨¡å—å…±äº«/æ‡’åŠ è½½ç­‰å¾®å‰ç«¯çš„éœ€æ±‚ã€‚

------

## ğŸ§  å¾®å‰ç«¯æ˜¯ä»€ä¹ˆï¼Ÿ

å¾®å‰ç«¯ï¼ˆMicro-Frontendï¼‰æ˜¯ä¸€ç§å‰ç«¯æ¶æ„æ€æƒ³ï¼Œç›®æ ‡æ˜¯ï¼š

- å°†å¤§å‹å‰ç«¯åº”ç”¨**æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†æˆå¤šä¸ªå­åº”ç”¨**
- æ¯ä¸ªå­åº”ç”¨å¯ä»¥**ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€æŠ€æœ¯æ ˆå¯ä¸åŒ**
- æœ€ç»ˆé€šè¿‡ä¸€ä¸ªä¸»åº”ç”¨ï¼ˆå®¹å™¨ï¼‰è¿›è¡Œ**æ•´åˆ**

### ğŸ“¦ ç‰¹ç‚¹

- ç±»ä¼¼äºå¾®æœåŠ¡çš„å‰ç«¯ç‰ˆæœ¬
- å¸¸è§æ•´åˆæ–¹å¼æœ‰ iframeã€JavaScript è„šæœ¬æ³¨å…¥ã€è·¯ç”±åŠ«æŒç­‰
- å®ç°æŠ€æœ¯æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š
  - Webpack Module Federation
  - Qiankun
  - single-spa
  - SystemJS
  - è‡ªå®šä¹‰åŠ è½½æœºåˆ¶

------

## ğŸ§© Module Federation æ˜¯ä»€ä¹ˆï¼Ÿ

Module Federation æ˜¯ **Webpack 5 å¼•å…¥çš„æ¨¡å—å…±äº«æœºåˆ¶**ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ï¼ˆè€Œä¸æ˜¯æ‰“åŒ…æ—¶ï¼‰ä»**å…¶ä»–è¿œç¨‹é¡¹ç›®åŠ¨æ€åŠ è½½æ¨¡å—**ã€‚

### ğŸ“¦ ç‰¹ç‚¹

- å¯ä»¥è·¨é¡¹ç›®å…±äº«ç»„ä»¶ã€åº“
- æ”¯æŒè¿è¡Œæ—¶æ‡’åŠ è½½
- å„é¡¹ç›®ä¹‹é—´å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€æ›´æ–°
- ä¸éœ€è¦å†æ‰‹åŠ¨ä¸Šä¼ æ‰“åŒ…äº§ç‰©æˆ–ç”¨ iframe å¼•ç”¨

### ğŸ”§ ç¤ºä¾‹ç”¨é€”

- A é¡¹ç›®æƒ³ç”¨ B é¡¹ç›®çš„ç»„ä»¶ï¼Œè€Œä¸é‡æ–°æ‰“åŒ…
- å¤šä¸ªå›¢é˜Ÿç»´æŠ¤ä¸åŒå­åº”ç”¨ï¼Œç»„åˆæˆä¸»åº”ç”¨

------

## âœ… æ€»ç»“å¯¹æ¯”

| é¡¹ç›®           | å¾®å‰ç«¯                         | Module Federation                  |
| -------------- | ------------------------------ | ---------------------------------- |
| æ¦‚å¿µå±‚çº§       | æ¶æ„æ€æƒ³                       | æŠ€æœ¯å®ç°ï¼ˆWebpack 5 æä¾›ï¼‰         |
| ç›®æ ‡           | åº”ç”¨è§£è€¦ã€ç‹¬ç«‹å¼€å‘éƒ¨ç½²         | æ¨¡å—å…±äº«ã€è¿è¡Œæ—¶åŠ è½½æ¨¡å—           |
| æ˜¯å¦ç»‘å®šå·¥å…·   | å¦ï¼Œå¯ç”¨ä¸åŒæ–¹æ¡ˆå®ç°           | æ˜¯ï¼ŒWebpack 5 çš„ç‰¹æ€§               |
| æ˜¯å¦èƒ½å•ç‹¬ä½¿ç”¨ | å¦ï¼Œéœ€è¦å…·ä½“å®ç°æ–¹å¼           | æ˜¯ï¼Œå¯ç”¨äºå¾®å‰ç«¯ï¼Œä¹Ÿå¯ç”¨äºç»„ä»¶å…±äº« |
| ä»£è¡¨æ–¹æ¡ˆ       | single-spaã€qiankunã€iframe ç­‰ | Webpack Module Federation          |

------

## ğŸ’¡ ä¸¤è€…å…³ç³»ï¼šå®ç° vs æ¶æ„

> ä½ å¯ä»¥ä½¿ç”¨ Module Federation æ¥å®ç°å¾®å‰ç«¯æ¶æ„ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹å¼ï¼ˆiframeã€single-spa ç­‰ï¼‰æ¥å®ç°å¾®å‰ç«¯ã€‚Module Federation æ›´åƒæ˜¯â€œå®ç°å¾®å‰ç«¯çš„ç°ä»£åŒ–åˆ©å™¨â€ã€‚

# å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«

å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆPub-Subï¼‰å’Œè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ç»å¸¸è¢«æ··ç”¨ï¼Œä½†å®ƒä»¬**æœ¬è´¨ä¸Šæ˜¯ä¸åŒçš„è®¾è®¡æ¨¡å¼**ï¼Œæœ‰å‡ ä¸ªå…³é”®åŒºåˆ«ï¼š

------

ğŸ§  ä¸€å¥è¯ç†è§£

| æ¨¡å¼              | ç®€è¦è¯´æ˜                                                     |
| ----------------- | ------------------------------------------------------------ |
| **è§‚å¯Ÿè€…æ¨¡å¼**    | ç›®æ ‡å¯¹è±¡ç»´æŠ¤ä¸€ç»„è§‚å¯Ÿè€…ï¼ŒçŠ¶æ€å˜åŒ–æ—¶ä¸»åŠ¨é€šçŸ¥å®ƒä»¬ï¼ˆ**ä¸€å¯¹å¤šï¼Œç›´æ¥é€šçŸ¥**ï¼‰ã€‚ |
| **å‘å¸ƒ-è®¢é˜…æ¨¡å¼** | å‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½é€šè¿‡ä¸­é—´çš„â€œäº‹ä»¶ä¸­å¿ƒâ€è§£è€¦ï¼ˆ**ä¸‰æ–¹ç»“æ„ï¼Œé—´æ¥é€šçŸ¥**ï¼‰ã€‚ |

------

ğŸ“Œ æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”

| ç»´åº¦         | è§‚å¯Ÿè€…æ¨¡å¼                                       | å‘å¸ƒ-è®¢é˜…æ¨¡å¼                                                |
| ------------ | ------------------------------------------------ | ------------------------------------------------------------ |
| **ç»“æ„ç»„æˆ** | ç›®æ ‡ï¼ˆSubjectï¼‰+ å¤šä¸ªè§‚å¯Ÿè€…ï¼ˆObserverï¼‰          | å‘å¸ƒè€…ï¼ˆPublisherï¼‰ã€è®¢é˜…è€…ï¼ˆSubscriberï¼‰ã€è°ƒåº¦ä¸­å¿ƒï¼ˆEvent Busï¼‰ |
| **æ˜¯å¦è§£è€¦** | âŒ å‘å¸ƒè€…ä¸è®¢é˜…è€…**è€¦åˆç´§å¯†**ï¼Œç›®æ ‡çŸ¥é“è§‚å¯Ÿè€…æ˜¯è° | âœ… å‘å¸ƒè€…å’Œè®¢é˜…è€…**å®Œå…¨è§£è€¦**ï¼Œéƒ½ä¸çŸ¥é“å¯¹æ–¹æ˜¯è°               |
| **é€šçŸ¥æ–¹å¼** | ç›®æ ‡å¯¹è±¡**ä¸»åŠ¨**é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…                   | å‘å¸ƒè€…å°†äº‹ä»¶å‘é€ç»™**äº‹ä»¶ä¸­å¿ƒ**ï¼Œå†ç”±å®ƒé€šçŸ¥è®¢é˜…è€…             |
| **è®¢é˜…è¿‡ç¨‹** | è§‚å¯Ÿè€…**ç›´æ¥æ³¨å†Œåˆ°ç›®æ ‡å¯¹è±¡ä¸Š**                   | è®¢é˜…è€…**æ³¨å†Œåˆ°äº‹ä»¶ä¸­å¿ƒçš„æŸä¸ªäº‹ä»¶ä¸Š**                         |
| **ä½¿ç”¨åœºæ™¯** | æ•°æ®é©±åŠ¨è§†å›¾æ›´æ–°ï¼ˆå¦‚ React çš„ä¾èµ–å“åº”ï¼‰          | å¤šæ¨¡å—é€šä¿¡ï¼ˆå¦‚äº‹ä»¶æ€»çº¿ã€æ¶ˆæ¯ä¸­å¿ƒï¼‰                           |
| **ä¾‹å­**     | Vue çš„å“åº”å¼ç³»ç»Ÿã€ä¾èµ–æ”¶é›†                       | Redux ä¸­çš„ middlewareã€Node.js EventEmitter                  |

------

ğŸ§© ç¤ºä¾‹ä»£ç å¯¹æ¯”ï¼ˆç®€åŒ–ç‰ˆï¼‰

ğŸ” è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆç›®æ ‡çŸ¥é“è§‚å¯Ÿè€…ï¼‰

```js
class Subject {
  constructor() {
    this.observers = []
  }

  addObserver(observer) {
    this.observers.push(observer)
  }

  notify(data) {
    this.observers.forEach(fn => fn(data))
  }
}

const subject = new Subject()
subject.addObserver((val) => console.log('observer1', val))
subject.notify('update')
```

> âœ… è§‚å¯Ÿè€…æ˜¯ç›´æ¥æŒ‚åœ¨ `subject` ä¸Šçš„ã€‚

------

ğŸ“£ å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆé€šè¿‡äº‹ä»¶ä¸­å¿ƒï¼‰

```js
class EventBus {
  constructor() {
    this.events = {}
  }

  subscribe(event, callback) {
    (this.events[event] ||= []).push(callback)
  }

  publish(event, data) {
    (this.events[event] || []).forEach(fn => fn(data))
  }
}

const bus = new EventBus()

bus.subscribe('news', (data) => console.log('Subscriber got:', data))

bus.publish('news', 'New article published!')
```

> âœ… å‘å¸ƒè€…å’Œè®¢é˜…è€…é€šè¿‡ `bus` é—´æ¥é€šä¿¡ï¼Œä¸ç›¸äº’çŸ¥é“ã€‚

------

âœ… æ€»ç»“ä¸€å¥è¯

- **è§‚å¯Ÿè€…æ¨¡å¼**æ˜¯**å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–**ï¼Œç”±è¢«è§‚å¯Ÿè€…ä¸»åŠ¨è§¦å‘é€šçŸ¥ï¼›
- **å‘å¸ƒ-è®¢é˜…æ¨¡å¼**æ˜¯é€šè¿‡ä¸€ä¸ª**å…¨å±€è°ƒåº¦ä¸­å¿ƒ**è¿›è¡Œäº‹ä»¶åˆ†å‘å’Œæ¥æ”¶ï¼Œå½»åº•è§£è€¦ã€‚

# å‰ç«¯å“ªäº›æŠ€æœ¯å·¥å…·ä¸­è¿ç”¨äº†å·¥å‚è®¾è®¡æ¨¡å¼

åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ**å·¥å‚è®¾è®¡æ¨¡å¼ï¼ˆFactory Patternï¼‰\**éå¸¸å¸¸è§ï¼Œå°¤å…¶é€‚ç”¨äº\**å¯¹è±¡åˆ›å»ºé€»è¾‘å¤æ‚ã€éœ€è¦å°è£…ç»†èŠ‚æˆ–æ„å»ºæŠ½è±¡æ¥å£**çš„åœºæ™¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨æˆ–ä½“ç°å·¥å‚æ¨¡å¼æ€æƒ³çš„å…¸å‹å‰ç«¯æŠ€æœ¯å·¥å…·æˆ–åœºæ™¯ï¼š

------

## âœ… å·¥å‚æ¨¡å¼æ ¸å¿ƒå®šä¹‰

> å·¥å‚æ¨¡å¼æ˜¯ä¸€ä¸ªåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒ**å°†å¯¹è±¡åˆ›å»ºå°è£…åœ¨ä¸€ä¸ªå‡½æ•°/ç±»/æ–¹æ³•ä¸­**ï¼Œé¿å…ä½¿ç”¨è€…ç›´æ¥ç”¨ `new`ï¼Œæé«˜åˆ›å»ºè¿‡ç¨‹çš„çµæ´»æ€§ä¸å¯æ‰©å±•æ€§ã€‚

------

## ğŸ”§ å‰ç«¯æŠ€æœ¯ä¸­å¸¸è§çš„å·¥å‚æ¨¡å¼åº”ç”¨åœºæ™¯ï¼š

------

1. **React.createElement / JSX ç¼–è¯‘å**

- **ç”¨é€”**ï¼šåœ¨ React ä¸­åˆ›å»ºè™šæ‹Ÿ DOM å…ƒç´ 
- **å·¥å‚è§’è‰²**ï¼š`React.createElement(type, props, children)`

```js
// JSX
<div>Hello</div>

// ç­‰ä»·äºå·¥å‚å‡½æ•°åˆ›å»ºï¼š
React.createElement('div', null, 'Hello')
```

ğŸ‘‰ `createElement` å°±æ˜¯å…¸å‹çš„å·¥å‚ï¼šæ ¹æ® `type` åˆ›å»ºä¸åŒç±»å‹çš„è™šæ‹Ÿ DOM èŠ‚ç‚¹ã€‚

------

2. **`document.createElement()`**

- **ä½œç”¨**ï¼šåŠ¨æ€åˆ›å»º DOM å…ƒç´ ã€‚
- æ ¹æ®æ ‡ç­¾åç”Ÿæˆå¯¹åº”çš„ DOM èŠ‚ç‚¹ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ `new HTMLDivElement()`ã€‚

```
const div = document.createElement('div'); // å·¥å‚æ–¹æ³•ç”Ÿæˆ div
```

3. **Axios å®ä¾‹åˆ›å»º**

```js
const instance = axios.create({
  baseURL: '/api',
  timeout: 1000,
});
```

- `axios.create()` å°±æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼š**æ ¹æ®é…ç½®è¿”å›ä¸€ä¸ªæ–°çš„ axios å®ä¾‹**
- æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çš„æ‹¦æˆªå™¨ã€é…ç½®ç­‰

------

4. **Redux ä¸­ createStoreã€configureStore**

```js
const store = createStore(reducer);
```

- `createStore` å’Œ `configureStore` éƒ½æ˜¯**å·¥å‚å‡½æ•°**ï¼Œå°è£…äº† store çš„åˆå§‹åŒ–è¿‡ç¨‹

------

5. **å‰ç«¯å›¾è¡¨åº“å¦‚ ECharts**

```js
const chart = echarts.init(dom); // å·¥å‚å‡½æ•°
```

- `echarts.init()` æ˜¯å·¥å‚æ–¹æ³•ï¼šæ ¹æ®å®¹å™¨å’Œé…ç½®è¿”å›ä¸€ä¸ªå›¾è¡¨å®ä¾‹å¯¹è±¡

------

6. **HTML5 Canvas / WebGL**

```js
const ctx = canvas.getContext('2d'); // å·¥å‚ï¼šè¿”å›ç»˜å›¾ä¸Šä¸‹æ–‡å¯¹è±¡
```

- `getContext()` æ ¹æ®ä¼ å…¥çš„ç±»å‹è¿”å›ä¸åŒçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆ2dã€webglï¼‰
