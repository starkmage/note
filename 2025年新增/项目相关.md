# é¢è¯•é—®ç­”ï¼šä½ é‡åˆ°è¿‡æœ€å¤æ‚çš„å‰ç«¯æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨æˆ‘å‚ä¸çš„é£æ§å¯è§†åŒ–å¹³å°ä¸­ï¼Œæœ€å¤æ‚çš„æŠ€æœ¯æŒ‘æˆ˜ä¹‹ä¸€ï¼Œæ˜¯å®ç°ä¸€ä¸ª**åŸºäº DSL é…ç½®é©±åŠ¨çš„å›¾è¡¨è”åŠ¨åˆ†æç³»ç»Ÿ**ï¼Œå®ƒæ”¯æŒç”¨æˆ·é€šè¿‡ç‚¹å‡»æŸä¸ªå›¾è¡¨ç»„ä»¶ï¼Œè”åŠ¨åˆ·æ–°å…¶ä»–å›¾è¡¨ã€è¡¨æ ¼æˆ–ç­›é€‰å™¨ï¼Œè¾¾åˆ°è·¨å›¾è¡¨ã€å¤šç»„ä»¶çš„åŠ¨æ€åˆ†æèƒ½åŠ›ã€‚

------

#### âœ… 1. è”åŠ¨è¡Œä¸ºé«˜åº¦æŠ½è±¡ã€å®Œå…¨é…ç½®åŒ–

ç³»ç»Ÿè¦æ±‚ç”¨æˆ·èƒ½å¤Ÿåœ¨é…ç½®å±‚å£°æ˜è”åŠ¨è¡Œä¸ºï¼Œæ¯”å¦‚ï¼š

- å“ªäº›ç»„ä»¶æ˜¯è”åŠ¨è§¦å‘æºï¼ˆå¦‚æŸ±çŠ¶å›¾ç‚¹å‡»ã€åœ°å›¾åŒºåŸŸé€‰æ‹©ï¼‰
- å“ªäº›ç»„ä»¶åº”å“åº”è”åŠ¨è¡Œä¸º
- æ”¯æŒç²¾ç»†åŒ–æ§åˆ¶ä½œç”¨èŒƒå›´ï¼š
  - **å…¨å±€è”åŠ¨**ï¼šå½±å“æ‰€æœ‰ç»„ä»¶
  - **å±€éƒ¨è”åŠ¨**ï¼šåªå½±å“æŒ‡å®šç»„ä»¶
  - **æ’é™¤è”åŠ¨**ï¼šä¸å½±å“æŸäº›ç»„ä»¶

ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨ DSL ä¸­å®šä¹‰äº† `include` å’Œ `exclude` å­—æ®µï¼Œä½¿è”åŠ¨è¡Œä¸ºå®Œå…¨ç”±åç«¯é…ç½®æ§åˆ¶ï¼Œå‰ç«¯æ— éœ€ç¡¬ç¼–ç ï¼Œå…·å¤‡è‰¯å¥½çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚

------

#### âœ… 2. æŠ€æœ¯å®ç°åŸºäºç»Ÿä¸€ç»„ä»¶ + React Context å®ç°ä½è€¦åˆè”åŠ¨æ¡†æ¶

æˆ‘ä»¬ä½¿ç”¨ **React Context** æ­å»ºäº†å…¨å±€è”åŠ¨ç³»ç»Ÿï¼Œæ‰€æœ‰å›¾è¡¨å®é™…ä¸Šå¤ç”¨ä¸€ä¸ªç»Ÿä¸€çš„é€šç”¨å›¾è¡¨ç»„ä»¶ï¼ˆå¦‚ `MetricChart`ï¼‰ï¼Œæ¯ä¸ªå®ä¾‹é€šè¿‡å”¯ä¸€çš„ `chartId` æ ‡è¯†è‡ªèº«èº«ä»½ã€‚

åœ¨ç»„ä»¶å†…éƒ¨ï¼Œé€šè¿‡è‡ªå®šä¹‰ hookï¼ˆå¦‚ `useLinkageEffect`ï¼‰ç»Ÿä¸€è®¢é˜…å¹¶å“åº”è”åŠ¨äº‹ä»¶ã€‚ç»„ä»¶æ ¹æ®ä¼ å…¥çš„ `chartId` åˆ¤æ–­æ˜¯å¦éœ€è¦å¤„ç†å½“å‰çš„è”åŠ¨äº‹ä»¶ï¼Œæˆ–è€…å°†è‡ªèº«äº¤äº’ä½œä¸ºè”åŠ¨æºä¸ŠæŠ¥ã€‚

è¿™ç§æ–¹å¼æ›¿ä»£äº†ä¼ ç»Ÿäº‹ä»¶æ€»çº¿æ–¹æ¡ˆï¼Œå…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- æ‰€æœ‰è”åŠ¨è¡Œä¸ºç”±é…ç½®é©±åŠ¨ï¼Œç»„ä»¶æœ¬èº«ä¿æŒé€šç”¨ã€è§£è€¦
- æ”¯æŒé“¾è·¯è¿½è¸ªï¼ˆè”åŠ¨æ¥æºã€æ•°æ®è´Ÿè½½ï¼‰
- çŠ¶æ€é›†ä¸­ç®¡ç†ï¼Œæ˜“äºè°ƒè¯•ä¸ç»´æŠ¤

------

#### âœ… 3. è¡¨æ ¼è”åŠ¨åœºæ™¯å¤„ç†æœ€ä¸ºå¤æ‚

å°¤å…¶åœ¨è¡¨æ ¼ç»„ä»¶ä¸­å¤„ç†è”åŠ¨æ—¶ï¼Œæ¶‰åŠå¤šä¸ªçŠ¶æ€ç»„åˆï¼Œå¤„ç†éš¾åº¦è¾ƒå¤§ï¼š

- **ç‚¹å‡»æŸè¡Œ**ï¼šéœ€è¦é«˜äº®è¯¥è¡Œï¼Œä½†**ä¸èƒ½é‡æ–°åŠ è½½æ•°æ®**
- **åˆ‡æ¢åˆ†é¡µ**ï¼šå¿…é¡»é‡æ–°è¯·æ±‚æ•°æ®ï¼Œå¹¶åŒæ­¥æ›´æ–°è”åŠ¨ä¸Šä¸‹æ–‡
- **å“åº”å¤–éƒ¨è”åŠ¨**ï¼šä½œä¸ºè”åŠ¨ç›®æ ‡æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å¿½ç•¥å½“å‰è”åŠ¨æº

ä¸ºæ­¤ï¼Œæˆ‘ä»¬è®¾è®¡äº†ï¼š

- **æ•°æ®å†»ç»“æœºåˆ¶ï¼ˆfreezeDataï¼‰**ï¼šä¸»åŠ¨äº¤äº’æ—¶ä¸´æ—¶å±è”½å¤–éƒ¨è”åŠ¨
- **åˆ†é¡µä¿æŠ¤ç­–ç•¥**ï¼šé¿å…é¡µç åˆ‡æ¢è§¦å‘é‡å¤æ•°æ®è¯·æ±‚
- **è”åŠ¨æºè¯†åˆ«ç³»ç»Ÿ**ï¼šç»„ä»¶åªå“åº”æ¥è‡ªå…¶ä»–ç»„ä»¶çš„è”åŠ¨äº‹ä»¶ï¼Œé¿å…å¾ªç¯è§¦å‘

------

#### âœ… æ€»ç»“

è¿™ä¸ªè”åŠ¨ç³»ç»Ÿæ˜¯æ•´ä¸ªå¯è§†åŒ–å¹³å°çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ¶µç›–äº†é…ç½®é©±åŠ¨ã€ç»Ÿä¸€ç»„ä»¶æ¶æ„ã€è·¨ç»„ä»¶é€šä¿¡ã€çŠ¶æ€éš”ç¦»ä¸è”åŠ¨è¾¹ç•Œæ§åˆ¶ç­‰å¤šä¸ªå¤æ‚ç‚¹ã€‚æˆ‘è´Ÿè´£äº†æ•´ä½“æ–¹æ¡ˆè®¾è®¡ä¸å…³é”®éƒ¨åˆ†å®ç°ï¼Œè¿™æ®µç»å†è®©æˆ‘åœ¨åº”å¯¹é«˜åº¦åŠ¨æ€ã€ä½è€¦åˆçš„å‰ç«¯æ¶æ„è®¾è®¡ä¸Šæœ‰äº†æ·±å…¥ç†è§£

# æ•°æ®é©±åŠ¨å¼€å‘

------

### ğŸ¯ é¢è¯•å›ç­”ï¼šå¦‚ä½•åœ¨é¡¹ç›®ä¸­å®è·µæ•°æ®é©±åŠ¨å¼€å‘ï¼Ÿ

> åœ¨æˆ‘ä»¬æ„å»ºçš„**é£æ§åˆè§„å¯è§†åŒ–å¹³å°**ä¸­ï¼Œæˆ‘æ·±åº¦å‚ä¸äº†**æ•°æ®é©±åŠ¨å¼€å‘**çš„å®è·µã€‚æˆ‘ä»¬å¹³å°çš„æ ¸å¿ƒç†å¿µå°±æ˜¯â€œ**è®©æ•°æ®é©±åŠ¨ UI æ¸²æŸ“ä¸äº¤äº’é€»è¾‘**â€ï¼Œè€Œä¸æ˜¯å†™æ­»åœ¨ä»£ç ä¸­ã€‚

------

#### âœ… ç¬¬ä¸€ï¼ŒDSL é…ç½®é©±åŠ¨å›¾è¡¨æ¸²æŸ“

æˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—å†…éƒ¨çš„ DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰ï¼Œç”¨äºæè¿°å›¾è¡¨ç±»å‹ã€ç»´åº¦ã€æŒ‡æ ‡ã€ç­›é€‰é¡¹ã€è”åŠ¨è¡Œä¸ºç­‰é…ç½®ã€‚å‰ç«¯æ ¹æ®è¿™å¥—é…ç½®åŠ¨æ€æ¸²æŸ“å›¾è¡¨å’Œé¢æ¿ï¼Œè€Œä¸æ˜¯å†™æ­»ç»„ä»¶ç»“æ„ã€‚
 é€šè¿‡ Schema æ¸²æŸ“æœºåˆ¶ + é€šç”¨å›¾è¡¨ç»„ä»¶ï¼Œæˆ‘ä»¬å®ç°äº†å›¾è¡¨ç³»ç»Ÿçš„é«˜åº¦â€œ**å¯é…ç½®åŒ–**â€å’Œâ€œ**å‰åç«¯è§£è€¦**â€ã€‚

ğŸ‘‰ ä¸¾ä¾‹ï¼š

- åå°é…ç½® `{ type: "bar", x: "country", y: "risk_score" }`
  â†’ å‰ç«¯å°±æ¸²æŸ“å‡ºå¯¹åº”çš„æŸ±çŠ¶å›¾
- æ”¹å˜é…ç½®å°±èƒ½åˆ‡æ¢å›¾è¡¨ç±»å‹ã€æ•°æ®æºï¼Œæ— éœ€æ”¹ä»£ç 

------

#### âœ… ç¬¬äºŒï¼Œæ•°æ®è”åŠ¨ä¸æ¡ä»¶é€»è¾‘é©±åŠ¨äº¤äº’

æˆ‘ä»¬è¿˜å®ç°äº†**å›¾è¡¨ä¹‹é—´çš„æ•°æ®è”åŠ¨æœºåˆ¶**ï¼Œä¾‹å¦‚ç”¨æˆ·åœ¨é£é™©åœ°å›¾ä¸Šç‚¹å‡»æŸåŒºåŸŸåï¼Œå¹³å°ä¼šæ ¹æ®è¯¥åŒºåŸŸçš„ä»£ç åŠ¨æ€æ‹‰å–è¯¦ç»†æŒ‡æ ‡ï¼Œæ›´æ–°å³ä¾§è¶‹åŠ¿å›¾ã€‚è¿™äº›äº¤äº’å®Œå…¨ç”±é…ç½®é©±åŠ¨ï¼Œä¸éœ€è¦å†™æ­»äº‹ä»¶ç»‘å®šé€»è¾‘ã€‚

ğŸ‘‰ æŠ€æœ¯ç‚¹åŒ…æ‹¬ï¼š

- é…ç½®å¼è”åŠ¨è§„åˆ™ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ç»‘å®šæŸæ¥å£ + ç›®æ ‡å›¾è¡¨åˆ·æ–°ï¼‰
- å“åº”å¼æ•°æ®å¤„ç†ï¼Œç”¨äºè‡ªåŠ¨æ„ŸçŸ¥æ•°æ®å˜åŒ–å¹¶æ›´æ–°è§†å›¾

------

#### âœ… ç¬¬ä¸‰ï¼Œç”¨æˆ·è¡Œä¸ºæ•°æ®é©±åŠ¨ä¼˜åŒ–è¿­ä»£ï¼ˆ+ Datadog RUMï¼‰

è™½ç„¶æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ A/B Testï¼Œä½†æˆ‘ä»¬é€šè¿‡ **Datadog RUMï¼ˆReal User Monitoringï¼‰** æ¥å…¥äº†å¹³å°çš„å‰ç«¯å¯è§‚æµ‹ç³»ç»Ÿï¼Œè‡ªåŠ¨é‡‡é›†ç”¨æˆ·åœ¨å¹³å°ä¸Šçš„è¡Œä¸ºæ•°æ®å’Œæ€§èƒ½æŒ‡æ ‡ã€‚

æˆ‘ä»¬é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‡ ä¸ªç»´åº¦çš„æ•°æ®ï¼š

- **ç”¨æˆ·è¡Œä¸ºè·¯å¾„ï¼ˆç‚¹å‡»ã€è·³è½¬ã€è¡¨å•äº¤äº’ï¼‰**
- **å‰ç«¯æ ¸å¿ƒæ“ä½œçš„è€—æ—¶æ•°æ®ï¼ˆå¦‚å›¾è¡¨åŠ è½½æ—¶é—´ã€é¡µé¢å“åº”ï¼‰**
- **é”™è¯¯è¿½è¸ªï¼ˆJS errorã€ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼‰**
- **ä½¿ç”¨é¢‘ç‡ä½çš„ç­›é€‰é¡¹å’ŒåŠŸèƒ½æ¨¡å—**

è¿™äº›æ•°æ®å¸®åŠ©æˆ‘ä»¬ç²¾å‡†è¯†åˆ«ï¼š

- å“ªäº›å›¾è¡¨åŠ è½½æ…¢ â†’ ä¼˜åŒ–æ¥å£æˆ–æ‡’åŠ è½½ç­–ç•¥
- å“ªäº›åŠŸèƒ½ä½¿ç”¨ç‡ä½ â†’ è¯„ä¼°æ˜¯å¦ç²¾ç®€ UI
- å“ªäº›é”™è¯¯é¢‘å‘ â†’ å¿«é€Ÿå®šä½å¹¶ä¿®å¤ï¼Œæé«˜ç¨³å®šæ€§

- Which charts load slowly â†’ optimize APIs or implement lazy loading strategies
- Which features have low usage â†’ evaluate whether to simplify the UI
- Which errors occur frequently â†’ quickly identify and fix them to improve stability

ğŸ“Š æœ€ç»ˆï¼Œè¿™äº›åŸ‹ç‚¹æ•°æ®(Tracking data)å’Œæ€§èƒ½æŒ‡æ ‡éƒ½åé¦ˆåˆ°æˆ‘ä»¬çš„**è¿­ä»£å†³ç­–å’Œä¼˜åŒ–ä¼˜å…ˆçº§ä¸­**ï¼Œå½¢æˆå®Œæ•´çš„â€œæ•°æ®é—­ç¯â€ï¼Œæ¨åŠ¨äº§å“æŒç»­æ¼”è¿›ã€‚

------

### ğŸ§© é¢è¯•é«˜åˆ†æ€»ç»“å¥å¼ï¼ˆå‡çº§ç‰ˆï¼‰

> â€œæˆ‘ä»¬é€šè¿‡ DSL é…ç½®é©±åŠ¨å›¾è¡¨æ¸²æŸ“ï¼Œé€šè¿‡é…ç½®è”åŠ¨é©±åŠ¨äº¤äº’è¡Œä¸ºï¼Œå†é€šè¿‡ Datadog RUM æ”¶é›†çœŸå®ç”¨æˆ·è¡Œä¸ºå’Œæ€§èƒ½æ•°æ®ï¼Œæ„æˆäº†ä¸€ä¸ªä»æ„å»ºã€ä½¿ç”¨åˆ°ä¼˜åŒ–çš„å®Œæ•´æ•°æ®é©±åŠ¨é—­ç¯ã€‚â€

# æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰

- ä¸‰æ­¥èµ°æµç¨‹ï¼š
  - ç¼–å†™å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆRedï¼‰ï¼›
  - å®ç°åŠŸèƒ½ä½¿æµ‹è¯•é€šè¿‡ï¼ˆGreenï¼‰ï¼›
  - é‡æ„ä»£ç ï¼ˆRefactorï¼‰ã€‚
- ä¼˜åŠ¿ï¼šä¿è¯ä»£ç å¯é ï¼Œèƒ½å†™å‡ºå¯æµ‹è¯•ä»£ç ï¼›
- åŠ£åŠ¿ï¼šæ—¶é—´æˆæœ¬å¢åŠ ï¼ˆåˆæœŸå’ŒåæœŸç»´æŠ¤ï¼Œå°¤å…¶å½“åŠŸèƒ½å’Œ UI é¢‘ç¹å˜åŒ–æ—¶ï¼‰ã€‚

**TDDå®è·µé¢è¯•å›ç­”ç¤ºèŒƒ**

1. **å¯¹ TDD çš„ç†è§£**

> æµ‹è¯•é©±åŠ¨å¼€å‘æ˜¯ä¸€ç§å…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼Œå†ç¼–å†™ä»£ç å®ç°ï¼Œæœ€åé‡æ„çš„å¼€å‘æµç¨‹ã€‚è¿™æ ·å¯ä»¥ä¿è¯ä»£ç çš„æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼ŒåŒæ—¶æ˜ç¡®éœ€æ±‚è¾¹ç•Œå’Œè¡Œä¸ºé¢„æœŸã€‚

2. **TDD åœ¨é¡¹ç›®ä¸­çš„å…·ä½“å®è·µ**

> åœ¨æˆ‘ä»¬è´Ÿè´£çš„é£æ§åˆè§„å¯è§†åŒ–å¹³å°ä¸­ï¼Œå›¾è¡¨ç³»ç»Ÿé‡‡ç”¨åŸºäº DSL çš„é…ç½®é©±åŠ¨ï¼Œå‰ç«¯éœ€è¦å°† DSL æŠ½è±¡é…ç½®è½¬æ¢ä¸º ECharts å¯è¯†åˆ«çš„é…ç½®ï¼ˆoptionï¼‰ã€‚
>
> ç”±äº ECharts æ˜¯åŸºäº Canvas æ¸²æŸ“çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ— æ³•åœ¨ Jest çš„ jsdom ç¯å¢ƒä¸­ç›´æ¥æµ‹è¯•æ¸²æŸ“æ•ˆæœï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹å°† TDD èšç„¦åœ¨**DSL åˆ° ECharts é…ç½®è½¬æ¢é€»è¾‘**è¿™ä¸ªçº¯å‡½æ•°å±‚é¢ã€‚
>
> æ¯æ–°å¢ä¸€ä¸ªå›¾è¡¨ç±»å‹æˆ–é…ç½®ç‰¹æ€§ï¼Œæˆ‘éƒ½ä¼šå…ˆå†™æµ‹è¯•ç”¨ä¾‹è¦†ç›–ä¸åŒåœºæ™¯ï¼ˆå¦‚é…ç½®å®Œæ•´æ€§ã€è¾¹ç•Œå€¼ã€å¤šç»´åº¦ã€é”™è¯¯é…ç½®ç­‰ï¼‰ï¼Œç„¶åå†å®ç°å¯¹åº”è½¬æ¢å‡½æ•°ï¼Œç¡®ä¿æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ã€‚
>
> è¿™ç¡®ä¿äº† DSL é…ç½®è½¬æ¢æ¨¡å—çš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ºåç»­åŠŸèƒ½è¿­ä»£å’Œé‡æ„æä¾›äº†å¯é çš„å®‰å…¨ç½‘ã€‚

3. **å…¶ä»– TDD å®è·µ**

> é™¤äº† DSL è½¬æ¢ï¼Œæˆ‘ä»¬è¿˜å¯¹åŠ¨æ€è¡¨å•æ ¡éªŒé€»è¾‘ã€æƒé™è¿‡æ»¤ç­‰çº¯ä¸šåŠ¡é€»è¾‘æ¨¡å—è¿›è¡Œ TDD é©±åŠ¨å¼€å‘ï¼Œä¿è¯å¤æ‚é€»è¾‘çš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ã€‚
>
> å¯¹äºç»„ä»¶å±‚é¢ï¼Œæˆ‘ä»¬ä¸»è¦æµ‹è¯•äº‹ä»¶æ˜¯å¦æ­£ç¡®ç»‘å®šã€æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ï¼Œé¿å…ç›´æ¥ä¾èµ–ç¬¬ä¸‰æ–¹åº“çš„æ¸²æŸ“ç»“æœï¼Œä»è€Œåšåˆ°â€œæµ‹å·±ä¸æµ‹ç¬¬ä¸‰æ–¹â€ã€‚

4. **TDD å¸¦æ¥çš„ä»·å€¼**

> é€šè¿‡ TDDï¼Œä¸ä»…æå‡äº†ä»£ç è´¨é‡å’Œæµ‹è¯•è¦†ç›–ç‡ï¼Œä¹Ÿå¢å¼ºäº†å›¢é˜Ÿçš„ä¿¡å¿ƒå’Œåä½œæ•ˆç‡ã€‚åç»­å¯¹æ ¸å¿ƒé€»è¾‘çš„é‡æ„å’Œæ‰©å±•å˜å¾—æ›´åŠ å®‰å…¨å’Œé«˜æ•ˆï¼Œæå¤§é™ä½äº†å›å½’é£é™©ã€‚

# é¡¹ç›®é¡µé¢æ¸²æŸ“é€Ÿåº¦ä¼˜åŒ–

## 1.Webpack

------

### **âœ… 1. å¯ç”¨ `SplitChunksPlugin` æ‹†åˆ†å…¬å…±ä¾èµ–ï¼ˆå¦‚ Reactã€Lodashï¼‰**

å¤š vendors æ‹†åˆ†ç­–ç•¥ï¼Œé€šè¿‡ `cacheGroups` è¿›ä¸€æ­¥ **ç»†ç²’åº¦æ‹†åˆ† node_modules ä¸­çš„åº“**

**å…¶å®å°±æ˜¯åŒ…çš„è¯·æ±‚æ•°é‡å’ŒåŒ…çš„å¤§å°ä¹‹é—´çš„å¹³è¡¡**

#### å…³äºå¤§Vendors.jsçš„è®¨è®ºï¼š

##### å¥½å¤„ï¼š

è™½ç„¶ **ä¸€ä¸ªå¤§çš„ `vendors.js`ï¼ˆæŠŠæ‰€æœ‰ node_modules æ‰“è¿›å»ï¼‰å¯èƒ½å˜å¤§ï¼Œé¦–å±åŠ è½½æ…¢ã€é˜»å¡é¡µé¢æ¸²æŸ“**ï¼Œä½†å®ƒä¹Ÿ**å¹¶ä¸æ˜¯å…¨æ— ä¼˜åŠ¿**ï¼Œå°¤å…¶æ˜¯åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸‹ **æ˜¯åˆç†ã€ç”šè‡³æ¨èçš„åšæ³•**ã€‚

------

1. **æµè§ˆå™¨ç¼“å­˜å‘½ä¸­ç‡é«˜ï¼ˆLong-Term Cachingï¼‰**

- `node_modules` ä¸­çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆReactã€Lodashã€AntD ç­‰ï¼‰**é€šå¸¸ç¨³å®šä¸å˜**ï¼Œæ›´æ–°é¢‘ç‡ä½ã€‚
- æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„ `vendors.[contenthash].js` åï¼Œåªè¦ä¸å˜å°±ä¸ä¼šé‡æ–°ä¸‹è½½ã€‚
- æµè§ˆå™¨å¯ä»¥**é•¿æ—¶é—´ç¼“å­˜**ï¼Œåˆ‡æ¢é¡µé¢æ—¶å‡ ä¹ä¸ç”¨é‡æ–°åŠ è½½ä¾èµ–ã€‚

âœ… **é€‚åˆï¼š**

> ä¸­å¤§å‹é¡¹ç›®ï¼Œç”¨æˆ·å¤šæ¬¡è®¿é—®å¤šä¸ªé¡µé¢æ—¶ï¼Œå¯ä»¥å¤ç”¨ç¼“å­˜ï¼Œæé«˜æ€§èƒ½ã€‚

------

2. **å‡å°‘é‡å¤ä»£ç æ‰“åŒ…ï¼ˆé¿å…é‡å¤ä¾èµ–ï¼‰**

- å¦‚æœä¸æ‹†å‡ºå»ï¼Œå¤šä¸ªä¸šåŠ¡é¡µé¢ä¼šå„è‡ªæ‰“åŒ…ä¸€ä»½é‡å¤çš„ Reactã€Lodash ç­‰ã€‚
- ä¼šå¯¼è‡´æ€»çš„ bundle ä½“ç§¯æ›´å¤§ã€ä¸‹è½½æ—¶é—´æ›´é•¿ã€‚

âœ… **vendors.js æä¾›ä¸€ä¸ªå…¬å…±ä¾èµ–æ± **ï¼Œå¤šä¸ªé¡µé¢å…±äº«ï¼ŒèŠ‚çœæ•´ä½“ç½‘ç»œèµ„æºã€‚

------

3. **æ‰“åŒ…é€»è¾‘ç®€å•ï¼Œæ˜“äºç»´æŠ¤**

- æ‹†æˆå¤šä¸ªå° vendorsï¼ˆå¦‚ react-vendorã€ui-vendorï¼‰è™½ç„¶æ›´çµæ´»ï¼Œä½†é…ç½®å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™ã€‚
- ä¸€ä¸ªå¤§ vendors.js æ˜¯ Webpack é»˜è®¤è¡Œä¸ºï¼Œå¼€ç®±å³ç”¨ã€‚

âœ… **é€‚åˆï¼š**

> å°å›¢é˜Ÿã€è¿½æ±‚ç¨³å®šä¼˜å…ˆï¼Œæˆ–è€…å‰æœŸåŸå‹å¼€å‘å¿«é€Ÿä¸Šçº¿ã€‚

------

4. **ä½“ç§¯å¯æ§æ—¶ï¼Œå¤§ vendors å¹¶ä¸ä¼šé€ æˆæ€§èƒ½é—®é¢˜**

- å¦‚æœé¡¹ç›®ä¾èµ–ä¸å¤šï¼ˆæ¯”å¦‚åªç”¨ React å’Œ a few utilitiesï¼‰ï¼Œvendors.js å¯èƒ½ä¹Ÿå°±å‡ ç™¾ KBã€‚
- **ä½“ç§¯ < 300~400 KB çš„ vendors æ˜¯å¯ä»¥æ¥å—çš„**ï¼Œå°¤å…¶é…åˆ gzip åä¼ è¾“ä½“ç§¯æ›´å°ã€‚

##### ç¼ºç‚¹ï¼š

1. **æ–‡ä»¶è¿‡å¤§ï¼Œé˜»å¡é¦–æ¬¡æ¸²æŸ“**

- æµè§ˆå™¨å¿…é¡»ä¸‹è½½ã€è§£æã€æ‰§è¡Œè¿™ä¸ªå·¨å¤§çš„ `vendors.js` æ‰èƒ½å¼€å§‹æ¸²æŸ“ UIã€‚
- æ¯”å¦‚æ‰“åŒ…äº† Reactã€ReactDOMã€momentã€lodashã€antdã€echartsã€xlsx... ä¼šè½»æ¾å‡  MBã€‚

2. **æ— æ³•æŒ‰éœ€åŠ è½½ï¼ˆæ‰€æœ‰é¡µé¢éƒ½å¿…é¡»åŠ è½½è¿™ä¸ªåŒ…ï¼‰**

- å³ä¾¿æŸä¸ªé¡µé¢ä¸éœ€è¦ echartsï¼Œä¹Ÿä¼šåœ¨é¦–æ¬¡åŠ è½½æ—¶è¢«è¿«åŠ è½½å®ƒã€‚

3. **å½±å“ç¼“å­˜ç­–ç•¥ï¼ˆä¿®æ”¹ä¸€ä¸ªåº“å¯¼è‡´æ•´ä¸ª vendors è¢«é‡æ–°æ‰“åŒ…ï¼‰**

- åªè¦æŸä¸ªä¾èµ–æ›´æ–°äº†ï¼ˆæ¯”å¦‚ lodash å‡çº§ï¼‰ï¼Œæ•´ä¸ª `vendors.js` çš„ hash å°±ä¼šå˜ï¼Œç¼“å­˜å¤±æ•ˆã€‚

```js
module.exports = {
  optimization: {
    splitChunks: {
      // chunks: 'all' è¡¨ç¤ºä¸ç®¡æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥å¯¼å…¥çš„æ¨¡å—ï¼Œåªè¦ç¬¦åˆæ¡ä»¶å°±å¯ä»¥è¢«æ‹†åˆ†å‡ºå»ã€‚
      chunks: 'all',
      cacheGroups: {
        reactVendor: {
          test: /[\\/]node_modules[\\/](react|react-dom)[\\/]/,
          name: 'react-vendor',
          chunks: 'all',
          // priorityè¡¨ç¤ºè¯¥æ‹†åˆ†è§„åˆ™çš„ä¼˜å…ˆçº§ï¼Œå½“å¤šä¸ªè§„åˆ™å†²çªæ—¶ï¼ŒWebpack ä¼šé€‰æ‹©ä¼˜å…ˆçº§æ›´é«˜ï¼ˆæ•°å€¼æ›´å¤§ï¼‰çš„è§„åˆ™æ¥å†³å®šæ¨¡å—å½’å±ã€‚
          priority: 20,
        },
        uiVendor: {
          test: /[\\/]node_modules[\\/](antd|@mui|element-plus)[\\/]/,
          name: 'ui-vendor',
          chunks: 'all',
          priority: 10,
        },
        chartVendor: {
          test: /[\\/]node_modules[\\/](echarts|chart.js)[\\/]/,
          name: 'chart-vendor',
          chunks: 'all',
          priority: 5,
        },
        commons: {
          test: /[\\/]src[\\/]components[\\/]/,
          name: 'commons',
          minChunks: 2,
          chunks: 'all',
          priority: -10,
        },
      }
    }
  }
};
```

------

### **âœ… 2. åŠ¨æ€æ‹†åˆ†ä¸šåŠ¡ä»£ç ï¼ˆæŒ‰è·¯ç”±æˆ–ç»„ä»¶ï¼‰**

ğŸ‘‡ **æ–¹å¼ä¸€ï¼šæŒ‰è·¯ç”±ï¼ˆroute-based code splittingï¼‰**

é€‚ç”¨äº React è·¯ç”±æ‡’åŠ è½½ã€‚

ğŸ”§ ç¤ºä¾‹ä»£ç ï¼ˆReact + React Router v6ï¼‰ï¼š

```jsx
import { lazy, Suspense } from 'react';
import { BrowserRouter, Routes, Route } from 'react-router-dom';

const HomePage = lazy(() => import('./pages/HomePage'));
const AboutPage = lazy(() => import('./pages/AboutPage'));

function App() {
  return (
    <BrowserRouter>
      <Suspense fallback={<div>Loading...</div>}>
        <Routes>
          <Route path="/" element={<HomePage />} />
          <Route path="/about" element={<AboutPage />} />
        </Routes>
      </Suspense>
    </BrowserRouter>
  );
}
```

ğŸ‘‡ **æ–¹å¼äºŒï¼šæŒ‰æ¨¡å—ï¼ˆcomponent-based code splittingï¼‰**

é€‚ç”¨äºæŸäº›ç»„ä»¶ä¸å¸¸ä½¿ç”¨ï¼Œå¦‚å›¾è¡¨ã€å¼¹çª—ã€ä¸Šä¼ ç»„ä»¶ç­‰ã€‚

```jsx
import { lazy, Suspense } from 'react';

const Chart = lazy(() => import('./components/Chart'));

function Dashboard() {
  return (
    <div>
      <h1>Dashboard</h1>
      <Suspense fallback={<div>Loading chart...</div>}>
        <Chart />
      </Suspense>
    </div>
  );
}
```

## 2.æ¥å£

é‡æ„æ¥å£ï¼š

å‡å°‘æ¥å£æ•°æ®çš„size

filtersæ•°æ®æ‡’åŠ è½½