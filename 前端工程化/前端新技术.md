## 低代码概念

#### 为什么要做低代码？

基于目前可视化和模型驱动理念，通过低代码的方案可以大幅度降低业务交付的成本，为业务提供一种全新的开发范式。**可视化搭建去完成业务可以让产品和运营人员参与进来，可以极大得释放软件开发者的人力瓶颈，也进一步促进了技术和业务的深度合作。**

#### 一码多端

一次编码，PC、移动、小程序、客户端等多端适配

#### 可视化开发

可视化拖拽组件

## 微前端

微前端架构具备以下几个核心价值：

- **技术栈无关**
  主框架不限制接入应用的技术栈，微应用具备完全自主权

- 独立开发、独立部署
  微应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新

- 增量升级

  在面对各种复杂场景时，我们通常很难对一个已经存在的系统做全量的技术栈升级或重构，而微前端是一种非常好的实施渐进式重构的手段和策略

- 独立运行时
  每个微应用之间状态隔离，运行时状态不共享

**微前端架构旨在解决单体应用在一个相对长的时间跨度下，由于参与的人员、团队的增多、变迁，从一个普通应用演变成一个巨石应用后，随之而来的应用不可维护的问题。**

widget 级别的微前端应用跟业务组件有什么区别？——**有没有区别在于你的实现是不是技术栈无关。**

**应用之间不应该有任何直接或间接的技术栈、依赖、以及实现上的耦合。**

https://qiankun.umijs.org/zh/guide

https://zhuanlan.zhihu.com/p/95085796

## 可视化开发与微前端结合

怎么看待可视化搭建平台的？

大部分业务都是不太敢轻易尝试这个方式去开发自己的核心产品的，原因是什么呢？很简单，不可控。我的产品的上限由平台决定而不是我自己的 coding 能力决定，这就很要命了。

尤其是一些核心模块，后面我想做一些个性的改造可能都支持不了。

但是如果有了微前端机制呢，只需要搭建平台去实现相关的协议，平台产出的页面就能很轻易的被集成到我们自己的应用里了。**我们开发时可以选择需要强控制的页面自己写，边缘页面用可视化生成即可，完全没有任何心理负担。**

## 跨端开发技术

### 背景

在选择技术之前，首先要清楚，需要跨哪几端？

Web、移动客户端、PC客户端、小程序

* 仅说 Web 的话， 或者 Web 和 桌面端跨平台， 还是 Electron 的优势， 基于 Vue, React 写界面， 生态完善，开发人员多， 性能尚可
* 如果跨的平台有 iOS 和 Android， Flutter 在现阶段（2021年） 和未来几年内，应该是比较好的跨平台解决方案了

### 为什么不全用以Web 为基础的 H5 Hybrid 方案

虽然现在很多平台都是支持用h5开发，比如Electron框架开发桌面客户端，

但是，性能问题是过不去的坎， JS 执行和布局、渲染互斥无法并行，导致过长的 JS 执行任务会执行正常的渲染导致卡顿。另外，W3C历史包袱多。

### flutter

flutter2.0推出web稳定版的开发，支持html和Canvas两种渲染方式。算是目前支持较全面的跨端开发框架，地层是通过使用自己的C++的引擎渲染界面，没有使用webview，也不像RN一样使用系统的组件，简单来说各个平台只是给Flutter提供一个画布。

* 开发效率高
* 谷歌亲儿子

还是存在太多问题

* Dart语言，适用面小，嵌套地狱，维护成本高
* 性能体验一般
* 社区热度低，生态差
* 一旦做深了，必须学习客户端开发知识，对开发者要求比较高

### RN

RN 是如何做到跨端的？这个其实全部仰仗于 React 的 vdom。利用 JS 生成 vdom，然后将 vdom 映射到 Native 的布局结构上，最终让 Native 渲染视图，以达到跨平台开发的目的。

简单来说，即通过结合 Web 的生态和 Native 的组件，让 JS 执行代码后用 Native 的组件进行渲染。

把 JS 执行、布局和渲染（Native 组件）放在三个进程分开执行，避免了 JS 执行复杂任务时界面卡顿。通过抛弃 CSS 中的大量标准，只支持部分 flex 布局能力来减少布局和渲染的复杂度。

缺点：

- iOS/Android 双端本身不一致的组件和布局机制，让双端一致性难以得到保障
- 依赖于 Native 机制也让一些 CSS 属性实现起来比较困难，例如老大难的 z-index 问题
- 借用了 Web 的生态但并不完全是 Web 生态，很多地方不一致，最常见的吐槽就是惯用的 CSS 布局方式无法使用
- 一旦做深了，只会 JS 根本解决不了问题，Java OC 都得学，对开发者要求比较高

### 小程序

* 各家推出自己的框架
* 基于Webview渲染

### 参考文章

https://www.cnblogs.com/skychx/p/cross-platform-tech.html

https://zhuanlan.zhihu.com/p/300680122

## 关于JSBridge

https://juejin.cn/post/6844903585268891662

## WebView

### 是什么

说白了就是APP内的一个容器的概念，为了便于理解，罗列几个网上的解释

说法1

Andoid 平台，SDK 中有一个控件叫 [WebView](https://link.zhihu.com/?target=https%3A//developer.android.com/reference/android/webkit/WebView)，IOS/MacOS 平台，SDK 中有一个控件叫 [WebView](https://link.zhihu.com/?target=https%3A//developer.apple.com/documentation/webkit/webview)，用于移动端 APP 嵌入(Embed) Web 技术，加载 Web 内容，基于 Webkit 引擎。

说法2

是在系统 SDK 中封装的一个组件。是手机中内置的 `Webkit` 内核阉割版本的浏览器，不过没有提供地址栏和导航栏，只是单纯的展示一个网页界面。

### WebKit

WebKit是苹果提出的开源的浏览器引擎，Safari、chorme都是基于webkit引擎的（虽然后来谷歌基于WebKit自立Blink/Chromium，也就是现在Chorme浏览器的内核）

传统上，WebKit包含一个网页引擎WebCore和一个脚本引擎JavaScriptCore，不过， 随着JavaScript引擎的独立性越来越强，现在WebKit和WebCore已经基本上混用不分（例如Google Chrome采用V8引擎，却仍然宣称自己是WebKit内核）。

现在称Webkit内核基本都只包含了渲染引擎，但是传统本应包含JS引擎

### 和手机浏览器的区别

Andoid、IOS 平台浏览器，也是**基于 Webkit 引擎**，是比WebView更完善的浏览器，毕竟WebView只是系统SDK的一个控件。

### 为什么慢

当我们打开一个WebView页面，页面往往会慢吞吞的loading很久，若干秒后才出现需要看到的页面，这是为什么呢？

当App首次打开时，**默认是并不初始化浏览器内核的；只有当创建WebView实例的时候，才会创建WebView的基础框架。**

所以与浏览器不同，**App中打开WebView的第一步并不是建立连接，而是启动浏览器内核**。

### 独特好处

原生APP需要发新版本才能修改前端内容，而通过webview方式的页面则只需要修改html代码或者js文件（如果是从服务器端获取，只要新的文件部署完成），用户重新刷新就可以使用更新后的。

### 参考文章：

https://tech.meituan.com/2017/06/09/webviewperf.html

https://juejin.cn/post/6932083257286590477

https://www.zhihu.com/question/40871670